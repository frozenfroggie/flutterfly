<div>
  <app-flight-search></app-flight-search>
  <div class="flight-results" *ngIf="flights.length > 0; else loading">
    <div *ngFor="let flight of flights" class="flight">
      <div class="flight-outbound">
        <img class="flight-airlane-logo" width="70px" [src]="'https://pics.avs.io/200/200/' + flight.outbounds[0].flightSegment.carrierCode + '.png'" />
        <div class="flight-time">
          <div class="from">
            {{ flight.outbounds[0].flightSegment.departure.iataCode }}
            {{ flight.outbounds[0].flightSegment.departure.at | utcDate | date:'HH:mm' }}
          </div>
          <div class="flight-duration">
            {{
              calcFlightDurationFromISO(
                flight.outbounds[0].flightSegment.departure.at,
                flight.outbounds[flight.outbounds.length - 1].flightSegment.arrival.at
              )
            }}
          </div>
          <div class="to">
            {{ flight.outbounds[flight.outbounds.length - 1].flightSegment.arrival.at | utcDate | date:'HH:mm' }}
            {{ flight.outbounds[flight.outbounds.length - 1].flightSegment.arrival.iataCode }}
          </div>
          </div>
        <div class="flight-stops">{{ flight.outbounds.length - 1 === 0 ? "Non-Stop" : "Stops: " + (flight.outbounds.length - 1) }}</div>
      </div>
      <div class="flight-inbound">
        <img class="flight-airlane-logo" width="70px" [src]="'https://pics.avs.io/200/200/' + flight.inbounds[0].flightSegment.carrierCode + '.png'" />
        <div class="flight-time">
          <div class="from">
            {{ flight.inbounds[0].flightSegment.departure.iataCode }}
            {{ flight.inbounds[0].flightSegment.departure.at | utcDate | date:'HH:mm' }}
          </div>
          <div class="flight-duration">
            {{
              calcFlightDurationFromISO(
                flight.inbounds[0].flightSegment.departure.at,
                flight.inbounds[flight.inbounds.length - 1].flightSegment.arrival.at
              )
            }}
          </div>
          <div class="to">
            {{ flight.inbounds[flight.inbounds.length - 1].flightSegment.arrival.at | utcDate | date:'HH:mm' }}
            {{ flight.inbounds[flight.inbounds.length - 1].flightSegment.arrival.iataCode }}
          </div>
          </div>
          <div class="flight-stops">{{ flight.inbounds.length - 1 === 0 ? "Non-Stop" : "Stops: " + (flight.inbounds.length - 1) }}</div>
      </div>
      <div class="price"><h2>{{ flight.price + " " + criteria.currency }}</h2></div>
    </div>
  </div>
  <ng-template #loading>
    <div class="loader">
      <i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i>
    </div>
  </ng-template>
</div>
